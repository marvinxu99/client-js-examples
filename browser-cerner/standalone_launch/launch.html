<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Standalone Launch SMART on FHIR</title>
        <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
    </head>
    <body>
        <script>
            FHIR.oauth2.authorize({

                // The client_id that you should have obtained after registering a client at
                // the EHR.
                clientId: "ae215ada-e41c-4f44-afa6-a3d502c31299",     

                // The scopes that you request from the EHR
                // scope: [
                //     "launch",           // Get the launch context in EHR launch mode
                //     "launch/patient",   // Get the current patient in standalone launch mode
                //     "launch/encounter", // Get the current encounter in standalone launch mode
                //     "openid fhirUser",  // Get the current user
                //     "patient/*.read",   // Read patient data
                //     "online_access profile"
                //  ].join(" "),
                scope: [
                    'launch online_access openid fhirUser profile',
                    'patient/Patient.read patient/Observation.read patient/Encounter.read',
                    'user/Practitioner.read',
                    'patient/Practitioner.read'
                ].join(' '),


                // Having this option means that it makes a standalone launch. This is to make
                // this demo usable out of the box, but it can still to EHR launch if "iss" and
                // "launch" url parameters are passed.
                // iss: "https://launch.smarthealthit.org/v/r3/sim/eyJoIjoiMSJ9/fhir",
                //iss: 'https://authorization.cerner.com/tenants/ec2458f2-1e24-41c8-b71b-0e701af7583d/protocols/oauth2/profiles/smart-v1/personas/provider/authorize',
                iss: 'https://authorization.cerner.com/tenants/ec2458f2-1e24-41c8-b71b-0e701af7583d',

                // Typically, if your redirectUri points to the root of the current directory
                // (where the launchUri is), you can omit this option because the default
                // value is ".". However, some servers (like this one) do not support directory
                // indexes so "." and "./" will not automatically map to the "index.html" file
                // in that directory.
                redirectUri: "https://marvinxu99.github.io/client-js-examples/browser-cerner/standalone_launch/index.html"
            });
        </script>
    </body>
</html>
